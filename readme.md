# 概要
ITSS準拠の研修カリキュラム「プログラミングの基礎（B121）」のうち、「クラス」の実習として実際にクラスとそのインスタンスを生成して挙動を見る実習用課題ソース正解例です。
実際の課題では、課題文だけを提示してゼロからWindows Formアプリを作ってもらい、そこをはじめにした8つの課題で銀行口座情報を管理する簡易アプリを作っていきます。

# 課題

## 事前準備

特に準備はありませんが、Visual StudioでC#のWindows Formプロジェクトを作成してください。後述する課題1でクラスを作成しますが、そのインスタンスをNewして、メソッドやプロパティを呼ぶロジックを適当なボタン等に関連付けて書く必要があります。その部分については必要であれば実装をサポートしてあげてください。

## 課題1 銀行口座クラス作成
プロジェクトに新しく「クラス」を追加して、後述の「BankAccount」クラスのコードを張り付けて完成させてください。クラスの機能は大きく下記の4機能です。

- 口座名義をプロパティで指定可能。
- Depositメソッドで入金（戻り値無し）。
- Withdrawメソッドで出金（失敗ならFalseを返す）。
- 金額はAccountBalanceプロパティで確認可能。

口座名義を表すAccountName以外は宣言部分しか記述されていませんので、中のロジックを作ってみてください。

作ったクラスは、プログラムのFormに適当なボタンを貼り付け、ボタンが押されると各メソッドが動くような仕掛けを追記して実際に動かしてみましょう（このあたりの具体的な方法が判らなければ講師が教えます）。

```cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ClassSample
{
    class BankAccount
    {
        // 口座の内部情報
        private string accountName = "";    // 口座名義人名
        private int total = 0;              // 口座残高

        /// <summary>
        /// 口座名義プロパティ。
        /// </summary>
        public string AccountName
        {
            get 
            {
                return accountName;
            }
            set
            {
                accountName = value;
                if (value == null)
                {
                    accountName = "";
                }
            }
        }

        /// <summary>
        /// 口座残高設定/取得用プロパティ。
        /// </summary>
        public int AccountBalance
        {
            get 
            {

            }
            set 
            {
                
            }
        }

        /// <summary>
        /// 口座への預け入れ
        /// </summary>
        /// <remarks>
        /// 引数で指定した金額を口座に追加する。
        /// </remarks>
        /// <returns></returns>
        public void Deposit(int kingaku)
        {
            
        }

        /// <summary>
        /// 口座引き落とし
        /// </summary>
        /// <remarks>
        /// 引数で指定した金額を口座から引き落とす。
        /// </remarks>
        /// <param name="kingaku">引き落とし金額。</param>
        /// <returns>追加成功ならTrue、失敗ならFalse。</returns>
        public Boolean Withdraw(int kingaku)
        {

        }
    }
}
```

### 講師用補足
クラスのひな形にロジックを追記しますが、プロパティの記述方法や、作ったクラス、メソッドなどを実際に動かす「とりあえずのドライバー」を作るあたりはフォローが必要と思われます。適宜、一緒に実装する形でサポートしてください。
また、ドライバー的なロジック（たとえばButton_Clickでインスタンスを作る、など）の実装を通して、Visual Studioのデバッグ機能等についても説明がまだであれば説明しても良いかも知れません。

---

## 課題2 口座操作GUI追加

### 新人用課題文
課題1で作ったクラスに入る情報を画面から操作できるようにします。フォームに下記の部品を用意し、金額を指定しての入出金を行えるようにしてください。

- 入出金テキストボックス
- 入金ボタン（入金後の総額をメッセージで表示）
- 出金ボタン（出金後の総額をメッセージで表示）

### 講師用補足
想定される間違いとして、ボタンクリックイベント内でインスタンスの変数を宣言し、ボタンクリック終了と同時にインスタンスが消える、という実装になっている可能性があります。その場合、いったんは「クラスの宣言直下にインスタンス用変数を宣言する」というやり方を提示して、ここで詰まらないようにしてください。スコープの概念に気づく良いチャンスなので。

---

## 課題3 残高照会機能追加

### 新人用課題文
課題2の内容を改造し、入出金のたびに表示されるメッセージを取りやめ、金額は残高照会でテキストボックスに表示されるようにします。下記の機能を追加してください。

- 入出金でのメッセージ表示をやめる。
- 残高照会ボタンを追加し、照会ボタンで残高がテキストボックスに表示されるようにする。

---

## 課題4 複数人口座管理機能追加

### 新人用課題文
銀行らしく、複数人の講座情報を管理できるようにします。ここまでの課題で作ったクラスの「インスタンス」を新人の人数分用意し、それぞれの名前を口座名義に持つ口座情報を人数分用意してください。
ここまでで作ったボタン等を改造し、各口座について入出金、残高照会を行えるようにしてください。

### 講師用補足
新人が4人の場合、

- 口座インスタンスを4つ用意する。
- フォームには名義人を選択できるコンボックスなどを用意し、「人を選んで、入金」といった手順で口座への指示を出せるようにする。
- もしくは、ここまでで作ったボタンなどをすべて4つずつ用意し、「＊＊さん用入金ボタン」といったような固定実装にする。

といったあたりが想定されます。特に正解はありません。効率の悪い実装だったとしてもいったんはそのまま受け入れ、答え合わせ段階で実装の多様性に気づくよう仕向けてください（どれが最適か、という選択はあっても、動くという目的が果たされている以上間違いではない、というようなところに落とす）。

---

## 課題5 残高不足対応

### 新人用課題文
引き出し処理で口座残高を超える引き出しが行われそうになった場合、警告メッセージを表示して引き出しを中止する処理を盛り込んでください。

### 講師用補足
いわゆる異常系処理の実装や発想に関する課題です。他にも数値以外の情報を入力した際の挙動や、預金額がint型の上限を超えた場合など考慮すべき事項はあるので、新人が気づくようであれば好きに実装させてみてください。

---

## 課題6 コンストラクター作成

### 新人用課題文
BankAccountクラスにコンストラクターを作り、新しく作ったBankAccountインスタンスの預金残高が必ず1,000円になるようにしてください。

---

## 課題7 引数有りコンストラクターの作成

### 新人用課題文
BankAccountクラスのコンストラクターを改造し、引数「string accountName」を追加、口座名義人の情報をコンストラクターで初期設定しなければならないようにしてください。
併せて、BankAccountを使っている機能の方も、BankAccountインスタンス作成時の処理で引数を指定するように変更してください。

---

## 課題8 引数の異なるコンストラクターオーバーロードの作成

### 新人用課題文
BankAccountクラスのコンストラクターを増やし、引数をそれぞれ変えて下記の3種類にしてください。

- 引数無し …… 各プロパティの初期値は設定されない。
- 口座名義人を初期設定できる（課題7で作った物と同じ）
- 口座名義人と口座残高の初期値を引数で指定できる（引数を2個にする）

次に、BankAccountのフォームを書き換え、各口座の初期残高を500円にしてください。

---

# サンプルソース概略

こちらは全課題を盛り込んだ正解サンプルです。

## BankAccont
比較的標準的な実装です。口座名義ごとにクラス内全体で使える変数を用意し、口座名義はコンボボックスから選択。選択された名義に対するインスタンスの切り替えはGetCurentAccountメソッド内でswitch文で分岐しています。「今使っている口座」をBankAccount型の変数に入れることで、お金の出し入れなどの処理でいちいちIfやSwitchによる分岐をしなくて良いようにしています。
この方式はシンプルですが、口座が増えた際などに変数を増やし、口座選択コンボボックスを増やすなど手間が発生するのが難点です。

## BankAccount2
コンボボックスによる名義人選択からの口座インスタンス選択を、「名義名」と「口座インスタンス」が入ったDictionaryで管理し、選択されたコンボボックスの名称をキーにしてインスタンスを取り出す実装をしています。Dictionaryという型はデータを「キーとなる情報」「データ」のペアで複数保管し、キーを指定すれば対応するデータをすぐに取り出せるというものです。これを使うことで、口座の数だけ名前の違う変数を作るのでは無く、口座の情報を作ると同時にDictionaryに入れて口座情報の保管をシンプルにしています。
この方式を使えば、口座の増減はDictionaryへの追加や削除で簡単に行え、実際の銀行システムに近い形での動きに出来ます。

## BankAccount3
名義名と口座をDictionaryで管理するところは同一ですが、名義を事前に配列のように使える型「List<String>」で宣言することで、コンボボックス初期化やDictionaryへの情報登録を簡略化しています。List型にするとforeachなどで内容すべてに対する処理を記述できるため、口座の数が何個になっても1つの処理でDictionaryの初期化やコンボボックスへの設定が簡単に行えます。

## BankAccount4
名義と口座の割り当てに際して、BankAccount3で作成したListをAccountManage_Load内で少し代わった方法で初期登録しています。通常のforeachではなく、List型が持つForEachメソッドを使い「自分の中身すべてについて、特定の処理を繰り返せ」という指示を行うことで1行～2行で初期化処理を行っています。この書き方は難しいので序盤は覚える必要ありませんが、この先登場するサンプルや、ネットに公開されているサンプルでは多用されていますのでいずれは使えるようになりたいところです。

```cs
// Actionデリゲートに匿名メソッドを割り当てて、それでusersリストに対してForEachで処理する方式
Action<string> createAccount = (item) => { accounts.Add(item, new BankAccount(item, 500)); };
users.ForEach(createAccount);
```
```cs
// usersリストに対してForEachにラムダ式でAddを繰り返し処理する方式
users.ForEach((item) => { accounts.Add(item, new BankAccount(item, 500)); });
```