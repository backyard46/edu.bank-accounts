# 概要
ITSS準拠の研修カリキュラム「プログラミングの基礎（B121）」のうち、「クラス」の実習として実際にクラスとそのインスタンスを生成して挙動を見る実習用課題ソース正解例です。実際の課題では、課題文だけを提示してゼロからWindows Formアプリを作ってもらいます。

# 課題

## 事前準備

特に準備はありませんが、Visual StudioでC#のWindows Formプロジェクトを作成してください。後述する課題1でクラスを作成しますが、そのインスタンスをNewして、メソッドやプロパティを呼ぶロジックを適当なボタン等に関連付けて書く必要があります。その部分については必要であれば実装をサポートしてあげてください。

## 課題1
プロジェクトに新しく「クラス」を追加して、後述の「BankAccount」クラスのコードを張り付けて完成させてください。クラスの機能は大きく下記の4機能です。

- 口座名義をプロパティで指定可能。
- Depositメソッドで入金（戻り値無し）。
- Withdrawメソッドで出金（失敗ならFalseを返す）。
- 金額はAccountBalanceプロパティで確認可能。

口座名義を表すAccountName以外は宣言部分しか記述されていませんので、中のロジックを作ってみてください。

```cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ClassSample
{
    class BankAccount
    {
        // 口座の内部情報
        private string accountName = "";    // 口座名義人名
        private int total = 0;              // 口座残高

        /// <summary>
        /// 口座名義プロパティ。
        /// </summary>
        public string AccountName
        {
            get 
            {
                return accountName;
            }
            set
            {
                accountName = value;
                if (value == null)
                {
                    accountName = "";
                }
            }
        }

        /// <summary>
        /// 口座残高設定/取得用プロパティ。
        /// </summary>
        public int AccountBalance
        {
            get 
            {

            }
            set 
            {
                
            }
        }

        /// <summary>
        /// 口座への預け入れ
        /// </summary>
        /// <remarks>
        /// 引数で指定した金額を口座に追加する。
        /// </remarks>
        /// <returns></returns>
        public void Deposit(int kingaku)
        {
            
        }

        /// <summary>
        /// 口座引き落とし
        /// </summary>
        /// <remarks>
        /// 引数で指定した金額を口座から引き落とす。
        /// </remarks>
        /// <param name="kingaku">引き落とし金額。</param>
        /// <returns>追加成功ならTrue、失敗ならFalse。</returns>
        public Boolean Withdraw(int kingaku)
        {

        }
    }
}
```

## 課題2

### 新人用課題文
課題1で作ったクラスに入る情報を画面から操作できるようにします。フォームに下記の部品を用意し、金額を指定しての入出金を行えるようにしてください。

- 入出金テキストボックス
- 入金ボタン（入金後の総額をメッセージで表示）
- 出金ボタン（出金後の総額をメッセージで表示）

### 講師用補足
想定される間違いとして、ボタンクリックイベント内でインスタンスの変数を宣言し、ボタンクリック終了と同時にインスタンスが消える、という実装になっている可能性があります。その場合、いったんは「クラスの宣言直下にインスタンス用変数を宣言する」というやり方を提示して、ここで詰まらないようにしてください。スコープの概念に気づく良いチャンスなので。

## 課題3

### 新人用課題文
課題2の内容を改造し、入出金のたびに表示されるメッセージを取りやめ、金額は残高照会でテキストボックスに表示されるようにします。下記の機能を追加してください。

- 入出金でのメッセージ表示をやめる。
- 残高照会ボタンを追加し、照会ボタンで残高がテキストボックスに表示されるようにする。

## 課題4

### 新人用課題文
銀行らしく、複数人の講座情報を管理できるようにします。ここまでの課題で作ったクラスの「インスタンス」を新人の人数分用意し、それぞれの名前を口座名義に持つ口座情報を人数分用意してください。
ここまでで作ったボタン等を改造し、各口座について入出金、残高照会を行えるようにしてください。

### 講師用補足
新人が4人の場合、

- 口座インスタンスを4つ用意する。
- フォームには名義人を選択できるコンボックスなどを用意し、「人を選んで、入金」といった手順で口座への指示を出せるようにする。
- もしくは、ここまでで作ったボタンなどをすべて4つずつ用意し、「＊＊さん用入金ボタン」といったような固定実装にする。

といったあたりが想定されます。特に正解はありません。効率の悪い実装だったとしてもいったんはそのまま受け入れ、答え合わせ段階で実装の多様性に気づくよう仕向けてください（どれが最適か、という選択はあっても、動くという目的が果たされている以上間違いではない、というようなところに落とす）。

## 課題5（オプション）
可能であれば実施を検討してください。

### 新人用課題文
引き出し処理で口座残高を超える引き出しが行われそうになった場合、警告メッセージを表示して引き出しを中止する処理を盛り込んでください。


# サンプルソース概略

こちらは全課題を盛り込んだ正解サンプルです。

## BankAccont
標準的な実装です。口座名義はコンボボックスから選択。選択された名義に対するインスタンスの切り替えはGetCurentAccountメソッド内でswitch文で分岐しています。口座インスタンスを変数に入れる形で実際にメソッド呼び出し等を行う変数を1本に絞っていますが、インスタンスを変数に入れて移すといったことに気づかない場合、すべての処理がswitch文やifによる分岐になる可能性もあります。
ここはいったんそのままスルーして、動く物を作ることを優先させてください。

## BankAccount2
コンボボックスによる名義人選択からの口座インスタンス選択を、「名義名」と「口座インスタンス」が入ったDictionaryで管理し、選択されたコンボボックスの名称をキーにしてインスタンスを取り出す実装をしています。
この発想に行き着く新人はいないと思われますが、実装例として説明すると面白いかも知れません。そのときの雰囲気に応じて提示するかどうかは判断してください。

## BankAccount3
名義名と口座をDictionaryで管理するところは同一ですが、名義を事前にList<String>で宣言することで、コンボボックス初期化やDictionaryへの情報登録を簡略化しています。こちらについても提示するかどうかは判断に任せます。

## BankAccount4
名義と口座の割り当てに際して、BankAccount3で作成したListに対するForEachメソッドでDictionary初期化を行っています。方式は2通り。Actionデリゲートに匿名メソッドでDictionary.Addを割り当てて実行する方法と、ForEachの中でいきなりラムダ式による処理定義を書く方法の2通りを記述しています。
難しい内容なのでこの時点で理解させる必要はありませんが、実装方法は多岐にわたることを示すために提示してもよいかもしれません。判断はお任せします。

```cs
// Actionデリゲートに匿名メソッドを割り当てて、それでusersリストに対してForEachで処理する方式
Action<string> createAccount = (item) => { accounts.Add(item, new BankAccount(item, 500)); };
users.ForEach(createAccount);
```
```cs
// usersリストに対してForEachにラムダ式でAddを繰り返し処理する方式
users.ForEach((item) => { accounts.Add(item, new BankAccount(item, 500)); });
```